# 租房平台管理后台功能说明文档

## 一、系统概述

租房平台管理后台是一套完整的B端管理系统，用于管理租房平台的用户、房源、商家、交易等核心业务数据。系统采用前后端分离架构，前端使用原生HTML/CSS/JavaScript实现，支持响应式布局。

### 技术栈
- **前端框架**：原生HTML5 + CSS3 + JavaScript (ES6+)
- **UI组件**：自定义组件 + FontAwesome图标
- **数据存储**：LocalStorage（Mock数据演示）
- **图表渲染**：Canvas原生绑制

---

## 二、模块架构图

```
┌─────────────────────────────────────────────────────────────────┐
│                        租房平台管理后台                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐       │
│  │ 数据概览  │  │ 用户管理  │  │ 门店管理  │  │ 房源管理  │       │
│  │ dashboard │  │  users   │  │  stores  │  │  houses  │       │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘       │
│                                                                 │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐       │
│  │ 找房需求  │  │ 联系记录  │  │ 活动管理  │  │ 看房管理  │       │
│  │find-reqs │  │  comms   │  │activities│  │  visits  │       │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘       │
│                                                                 │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐       │
│  │ 开店申请  │  │ 举报处理  │  │ 房豆管理  │  │ 城市管理  │       │
│  │store-app │  │ reports  │  │  points  │  │  cities  │       │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘       │
│                                                                 │
│  ┌──────────┐  ┌──────────┐  ┌──────────────────────┐         │
│  │ 字典管理  │  │ 系统设置  │  │      公共模块        │         │
│  │   dict   │  │ settings │  │       common        │         │
│  └──────────┘  └──────────┘  └──────────────────────┘         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 三、模块功能详解

### 1. 数据概览 (dashboard)

**功能描述**：系统首页，展示平台核心运营数据和趋势图表。

| 功能点 | 说明 |
|--------|------|
| 核心数据卡片 | 总用户数（租客/房东）、房源总数（在租/已出租）、入驻商家、房豆流通 |
| 用户增长趋势 | 支持近7天/30天/3月切换，展示租客与房东增长曲线 |
| 房源数据分析 | 新增发布与成功出租趋势对比 |
| 业务转化数据 | 看房预约与联系获取趋势 |
| 今日实时数据 | 新增用户、房源、预约、联系（带LIVE标识） |
| 房源分布图 | 整租/合租环形图 |
| 待处理事项 | 待审核房源、待处理举报、开店申请、待确认预约（可点击跳转） |
| 热门城市排行 | TOP5城市房源数量排行 |

---

### 2. 用户管理 (users)

**功能描述**：管理平台注册用户（租客和房东）。

| 功能点 | 说明 |
|--------|------|
| 用户列表 | 展示用户头像、昵称、手机号、角色、认证状态、注册时间 |
| 搜索筛选 | 支持按昵称/手机号搜索，按角色/认证状态/账号状态筛选 |
| 查看详情 | 查看用户完整信息 |
| 编辑用户 | 修改用户基本信息 |
| 账号状态 | 启用/禁用用户账号 |
| 分页功能 | 支持数据分页展示 |

**用户角色**：
- 租客（tenant）：发布找房需求、浏览房源、预约看房
- 房东（landlord）：发布直租房源、处理看房预约

---

### 3. 门店管理 (stores)

**功能描述**：管理入驻的商家门店信息。

| 功能点 | 说明 |
|--------|------|
| 门店列表 | 展示门店名称、店长、联系电话、地址、房源数、状态 |
| 统计卡片 | 总门店数、正常营业、已认证、房源总数 |
| 新增门店 | 录入门店基本信息、联系方式、地址、身份信息 |
| 编辑门店 | 修改门店信息 |
| 删除门店 | 删除门店记录 |
| 状态管理 | 开业/休息状态切换 |

**商家类型**：
- 中介（类型1）
- 公寓（类型2）

---

### 4. 房源管理 (houses)

**功能描述**：管理平台所有房源信息，包括租客转租、房东直租、商家发布的房源。

| 功能点 | 说明 |
|--------|------|
| 房源列表 | 展示标题、位置、租赁方式、户型、租金、发布者、状态 |
| 统计卡片 | 总房源数、待审核、已上架、已出租 |
| 搜索筛选 | 按标题/地址搜索，按来源/方式/状态筛选 |
| 录入房源 | 多Tab表单：基本信息、位置信息、图片上传、详细描述 |
| 编辑房源 | 修改房源信息 |
| 房源审核 | 通过/拒绝待审核房源 |
| 状态管理 | 上架/下架/标记已出租 |
| 图片管理 | 多图上传、设置封面 |
| 地图定位 | 经纬度获取 |

**发布者类型**：
- 租客转租（publisher_type=1）
- 房东直租（publisher_type=2）
- 商家发布（publisher_type=3）

**房源状态**：
- 0-审核中 → 1-已上架 → 2-已下架 / 3-已出租 / 4-已过期

---

### 5. 找房需求 (find-requests)

**功能描述**：管理租客发布的找房需求。

| 功能点 | 说明 |
|--------|------|
| 需求列表 | 展示用户、租赁方式、户型、价格区间、期望位置、状态 |
| 统计卡片 | 总需求数、待审核、已发布、已找到 |
| 搜索筛选 | 按用户/手机号搜索，按方式/状态筛选 |
| 新增需求 | 录入找房基本信息、价格范围、多位置管理 |
| 编辑需求 | 修改需求信息 |
| 多位置管理 | 支持添加多个期望位置（省/市/区/详细地址/经纬度） |
| 状态管理 | 发布/下架/标记已找到 |

---

### 6. 联系记录 (communications)

**功能描述**：记录用户获取联系方式的历史（仅记录信息，积分消耗在房豆管理中查看）。

| 功能点 | 说明 |
|--------|------|
| 记录列表 | 查看者、目标类型、目标信息、发布者、联系方式、获取时间 |
| 统计卡片 | 总记录数、房源联系、找房联系、今日获取 |
| 搜索筛选 | 按查看者类型、目标类型筛选 |
| 查看详情 | 查看完整记录信息 |
| 删除记录 | 删除联系记录 |

**查看者类型**：用户(1) / 商家(2)
**目标类型**：房源(1) / 找房(2)

---

### 7. 活动管理 (activities)

**功能描述**：管理小程序活动中心的活动配置。

| 功能点 | 说明 |
|--------|------|
| 活动列表 | 展示活动名称、类型、奖励、频率、参与人数、状态 |
| 新增活动 | 设置活动名称、类型、描述、奖励数量、参与频率、有效期 |
| 编辑活动 | 修改活动配置 |
| 删除活动 | 删除活动 |
| 状态开关 | 开启/关闭活动 |
| 排序管理 | 设置活动展示顺序 |

**活动类型**：
- 分享好友(1)、分享朋友圈(2)、查看广告(3)
- 每日签到(4)、邀请注册(5)、发布房源(6)、发布找房(7)

**参与频率**：
- 仅一次(1)、每天一次(2)、每周一次(3)、每月一次(4)、不限次数(5)

---

### 8. 看房管理 (visits)

**功能描述**：管理看房预约记录。

| 功能点 | 说明 |
|--------|------|
| 预约列表 | 租客、房源、房东/商家、预约时间、来源、状态 |
| 统计卡片 | 总预约数、待确认、已确认、已完成、已拒绝 |
| 搜索筛选 | 按租客/房源搜索，按来源/状态筛选 |
| 查看详情 | 查看预约完整信息 |
| 确认预约 | 房东/商家确认看房时间 |
| 拒绝预约 | 填写拒绝原因 |

**预约来源**：
- 用户申请(1)：租客主动申请看房
- 商家邀约(2)：商家邀请租客看房
- 扫码预约(3)：租客扫商家二维码预约

**预约状态**：
- 0-待确认 → 1-已确认 → 2-已完成 / 3-已拒绝 / 4-已取消

---

### 9. 开店申请 (store-applications)

**功能描述**：管理商家入驻申请。

| 功能点 | 说明 |
|--------|------|
| 申请列表 | 联系人、电话、意向小区、备注、状态、申请时间 |
| 统计卡片 | 总申请数、待处理、已联系、已开通、无效 |
| 搜索筛选 | 按联系人/电话搜索，按状态筛选 |
| 查看详情 | 查看申请完整信息 |
| 处理申请 | 标记已联系、开通商家、标记无效 |
| 添加备注 | 记录处理情况 |

**申请状态**：
- 0-待处理 → 1-已联系 → 2-已开通 / 3-无效

---

### 10. 举报处理 (reports)

**功能描述**：处理用户提交的举报信息。

| 功能点 | 说明 |
|--------|------|
| 举报列表 | 举报人、被举报类型、被举报对象、举报原因、状态、处理结果 |
| 统计卡片 | 总举报数、待处理、已处理、已驳回 |
| 搜索筛选 | 按举报人搜索，按被举报类型/状态筛选 |
| 查看详情 | 查看举报完整信息及证据 |
| 处理举报 | 警告、扣除房豆、禁用账号、驳回举报 |
| 删除举报 | 删除举报记录 |

**被举报类型**：用户(1) / 商家(2) / 房源(3) / 找房需求(4)
**举报原因**：虚假信息(1) / 骚扰辱骂(2) / 诈骗行为(3) / 违规内容(4) / 其他(5)
**处理结果**：警告(1) / 扣除房豆(2) / 禁用账号(3) / 无效举报(4)

---

### 11. 房豆管理 (points)

**功能描述**：管理平台虚拟积分"房豆"的流通记录。

| 功能点 | 说明 |
|--------|------|
| 记录列表 | 用户类型、用户、积分变动、操作后余额、类型、关联信息、时间 |
| 统计卡片 | 总流通量、总发放、总消耗、今日发放 |
| 搜索筛选 | 按用户搜索，按用户类型/变动类型筛选 |
| 发放/扣除 | 手动为用户发放或扣除房豆 |
| 查看详情 | 查看记录详情 |
| 删除记录 | 删除积分记录 |

**积分类型**：
- 获取：注册赠送(1)、签到(2)、观看广告(3)、发布房源(4)、发布找房(5)、系统赠送(7)
- 消耗：获取联系方式(6)、系统扣除(8)

---

### 12. 城市管理 (cities)

**功能描述**：管理平台已开通的服务城市。

| 功能点 | 说明 |
|--------|------|
| 城市列表 | 城市名称、行政代码、拼音、经纬度、热门状态、排序、服务状态 |
| 统计卡片 | 已开通城市、启用中、热门城市、暂停服务 |
| 新增城市 | 录入城市信息（省份、城市、代码、经纬度等） |
| 编辑城市 | 修改城市信息 |
| 删除城市 | 删除城市记录 |
| 热门设置 | 标记/取消热门城市 |
| 状态管理 | 启用/暂停服务 |

**匹配规则**：用户定位后，系统根据行政区划代码(adcode)与已开通城市进行匹配。

---

### 13. 字典管理 (dictionaries)

**功能描述**：管理系统中的配置项和枚举值。

| 功能点 | 说明 |
|--------|------|
| 类型列表 | 展示所有字典类型，支持搜索、分页 |
| 新增类型 | 添加字典类型（编码、名称、描述、排序） |
| 编辑类型 | 修改字典类型 |
| 删除类型 | 删除字典类型及其所有字典项 |
| 字典项管理 | 进入详情页管理该类型下的字典项 |
| 字典项列表 | 字典值、显示标签、样式预览、排序、状态 |
| 新增字典项 | 添加字典项（值、标签、样式、图标、排序） |
| 样式预览 | 实时预览标签样式效果 |
| 状态切换 | 启用/禁用字典项 |

**预置字典类型（22种）**：
- 用户角色、认证状态、房源状态、租赁方式、房间类型、出租类型
- 发布者类型、找房状态、积分类型、举报原因、举报状态、处理结果
- 活动类型、参与频率、看房来源、看房状态、开店申请状态
- 查看者类型、目标类型、获取方式、房东类型、被举报类型

---

### 14. 系统设置 (settings)

**功能描述**：配置系统参数和第三方服务。

| 配置分类 | 配置项 |
|----------|--------|
| **基础设置** | 房豆消耗/奖励配置、审核设置、系统公告 |
| **云存储配置** | 七牛云（AK/SK/Bucket/Region/Domain） |
| **地图服务** | 高德地图、百度地图、腾讯位置服务 |
| **微信配置** | 小程序AppID/AppSecret、微信支付（预留） |
| **短信服务** | 阿里云短信、腾讯云短信 |

**功能特点**：
- Tab分类导航
- 配置状态显示（已配置/未配置）
- 测试连接功能
- 密钥字段加密显示

---

### 15. 公共模块 (common)

**功能描述**：提供全局公共资源和工具函数。

| 文件 | 说明 |
|------|------|
| common.js | Mock数据、数据操作函数、侧边栏生成、分页组件、工具函数 |
| style.css | 全局样式、布局、组件样式、响应式适配 |

**核心功能**：
- `initMockData()` - 初始化模拟数据
- `getData(key)` / `saveData(key, value)` - 数据读写
- `addData()` / `updateData()` / `deleteData()` - CRUD操作
- `generateSidebarMenu()` - 动态生成侧边栏菜单
- `createPagination()` - 分页组件
- `formatDateTime()` - 日期格式化

---

## 四、模块关系图

```
                              ┌─────────────┐
                              │   用户注册   │
                              └──────┬──────┘
                                     │
                    ┌────────────────┼────────────────┐
                    ▼                ▼                ▼
              ┌──────────┐    ┌──────────┐    ┌──────────┐
              │   租客   │    │   房东   │    │   商家   │
              └────┬─────┘    └────┬─────┘    └────┬─────┘
                   │               │               │
         ┌─────────┴───────┐      │     ┌─────────┴───────┐
         ▼                 ▼      │     ▼                 ▼
   ┌──────────┐      ┌──────────┐│┌──────────┐     ┌──────────┐
   │ 发布找房 │      │ 浏览房源 │││ 发布房源 │     │ 发布房源 │
   └────┬─────┘      └────┬─────┘│└────┬─────┘     └────┬─────┘
        │                 │      │     │                 │
        │                 ▼      │     │                 │
        │           ┌──────────┐ │     │                 │
        │           │ 获取联系 │◄┼─────┼─────────────────┘
        │           │  方式    │ │     │
        │           └────┬─────┘ │     │
        │                │       │     │
        │                ▼       ▼     ▼
        │           ┌─────────────────────┐
        │           │     看房预约        │
        │           └─────────────────────┘
        │                    │
        │                    ▼
        │           ┌─────────────────────┐
        └──────────►│     成功租房        │
                    └─────────────────────┘
```

### 数据流向关系

| 源模块 | 目标模块 | 关系说明 |
|--------|----------|----------|
| 用户 | 房源 | 租客转租、房东直租 |
| 用户 | 找房需求 | 租客发布找房 |
| 商家 | 房源 | 商家发布房源 |
| 开店申请 | 商家 | 申请通过后创建商家 |
| 房源/找房 | 联系记录 | 获取联系方式产生记录 |
| 房源/找房 | 看房预约 | 用户申请/商家邀约看房 |
| 各操作 | 房豆记录 | 发布、获取联系方式等消耗/获取房豆 |
| 用户 | 举报 | 举报房源、用户、商家 |
| 活动 | 房豆记录 | 参与活动获得房豆奖励 |

---

## 五、权限说明

当前系统为单管理员模式，所有功能对管理员开放。后续可扩展的权限体系：

| 角色 | 权限范围 |
|------|----------|
| 超级管理员 | 所有功能 + 系统设置 |
| 运营管理员 | 用户、房源、需求、活动管理 |
| 客服专员 | 举报处理、看房管理、联系记录 |
| 商务专员 | 商家管理、开店申请 |

---

## 六、目录结构

```
admin/
├── index.html              # 后台入口（跳转到dashboard）
├── common/                 # 公共资源
│   ├── common.js          # 公共脚本（Mock数据、工具函数）
│   └── style.css          # 公共样式
├── dashboard/              # 数据概览
├── users/                  # 用户管理
├── stores/                 # 门店管理
├── houses/                 # 房源管理
├── find-requests/          # 找房需求
├── communications/         # 联系记录
├── activities/             # 活动管理
├── visits/                 # 看房管理
├── store-applications/     # 开店申请
├── reports/                # 举报处理
├── points/                 # 房豆管理
├── cities/                 # 城市管理
├── dictionaries/           # 字典管理
│   ├── index.html         # 字典类型列表
│   ├── detail.html        # 字典项详情
│   ├── script.js
│   ├── detail.js
│   └── style.css
└── settings/               # 系统设置
```

---

## 七、扩展建议

1. **接口对接**：将Mock数据替换为真实API接口
2. **权限管理**：增加角色权限控制模块
3. **操作日志**：记录管理员操作历史
4. **数据导出**：支持Excel/CSV导出功能
5. **消息通知**：站内消息和推送通知
6. **数据备份**：定时数据备份功能
7. **监控告警**：异常数据监控和告警

---

*文档版本：v1.0*
*更新日期：2024年*

